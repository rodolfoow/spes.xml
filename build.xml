<?xml version="1.0" encoding="UTF-8"?>
<build>
  <!-- Build jarayoni uchun asosiy buyruqlar -->
  <step name="Syncing ROM and Device Sources">
    <run>
      # 1. Pixel Experience 13 manifestini yuklash
      repo init -u https://github.com -b thirteen --depth=1;

      # 2. Sayann70 local manifestini qo'shish (spes uchun barcha tree-larni o'z ichiga oladi)
      mkdir -p .repo/local_manifests;
      curl -L https://raw.githubusercontent.com > .repo/local_manifests/spes.xml;

      # 3. Kodlarni yuklab olish (Sync)
      repo sync -c -j$(nproc --all) --force-sync --no-clone-bundle --no-tags;
    </run>
  </step>

  <step name="Starting Compilation">
    <run>
      # 4. Build muhitini sozlash va boshlash
      source build/envsetup.sh;
      lunch aosp_spes-userdebug;
      m bacon -j$(nproc --all);
    </run>
  </step>
</build>
